<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Hacker Simulator</title>
  <style>
    body {
      background: black;
      color: #00ff00;
      font-family: 'Courier New', monospace;
      margin: 0;
      padding: 0;
    }

    #hud {
      background: #003300;
      padding: 10px;
      text-align: center;
      font-size: 14px;
      box-shadow: 0 0 10px #00ff00;
    }

    #terminal {
      width: 90%;
      max-width: 800px;
      height: 400px;
      background: black;
      border: 2px solid #00ff00;
      padding: 10px;
      overflow-y: auto;
      margin: 20px auto;
    }

    #commandInput {
      width: 100%;
      background: black;
      border: none;
      color: #00ff00;
      font-family: inherit;
      font-size: 16px;
      outline: none;
    }

    .achievement {
      color: yellow;
    }
  </style>
</head>
<body>
  <div id="hud">
    üë§ <span id="username"></span> | üß† –£—Ä–æ–≤–µ–Ω—å: <span id="level">1</span> | üåü XP: <span id="xp">0</span> | üèÜ –ê—á–∏–≤–∫–∏: <span id="achievements">0</span>
    <br>
    üéØ –ó–∞–¥–∞–Ω–∏–µ: <span id="current-task">–ù–∞–ø–∏—à–∏ –∫–æ–º–∞–Ω–¥—É "whoami"</span>
  </div>

  <div id="terminal">
    <div>> <input id="commandInput" autofocus autocomplete="off" /></div>
  </div>

  <!-- –ó–≤—É–∫–∏ -->
  <audio id="soundEnter" src="https://cdn.pixabay.com/audio/2021/08/04/audio_dab7cb2640.mp3"></audio>
  <audio id="soundError" src="https://cdn.pixabay.com/audio/2022/03/15/audio_7d6ba5ef97.mp3"></audio>
  <audio id="soundSuccess" src="https://cdn.pixabay.com/audio/2022/03/15/audio_7f94fe30e0.mp3"></audio>

  <script>
    const username = localStorage.getItem('hackerUser');
    if (!username) location.href = 'index.html';

    // DOM
    document.getElementById('username').textContent = username;
    const terminal = document.getElementById('terminal');
    const input = document.getElementById('commandInput');
    const xpEl = document.getElementById('xp');
    const lvlEl = document.getElementById('level');
    const achEl = document.getElementById('achievements');
    const taskEl = document.getElementById('current-task');

    // –ó–≤—É–∫–∏
    const soundEnter = document.getElementById('soundEnter');
    const soundError = document.getElementById('soundError');
    const soundSuccess = document.getElementById('soundSuccess');

    // –ü—Ä–æ–≥—Ä–µ—Å—Å
    let xp = parseInt(localStorage.getItem('xp') || 0);
    let level = parseInt(localStorage.getItem('level') || 1);
    let achievements = JSON.parse(localStorage.getItem('achievements') || '[]');
    let currentTask = parseInt(localStorage.getItem('task') || 0);

    const tasks = [
      { command: "whoami", reward: 10, desc: '–ù–∞–ø–∏—à–∏ –∫–æ–º–∞–Ω–¥—É "whoami"' },
      { command: "coffee", reward: 20, desc: '–°–¥–µ–ª–∞–π —Å–µ–±–µ –∫–æ—Ñ–µ! –ù–∞–ø–∏—à–∏ "coffee"' },
      { command: "hack nasa", reward: 30, desc: '–ü–æ–ø—Ä–æ–±—É–π –≤–∑–ª–æ–º–∞—Ç—å NASA ‚Äî "hack nasa"' },
    ];

    updateHUD();

    input.addEventListener('keydown', e => {
      if (e.key === 'Enter') {
        const cmd = input.value.trim();
        printOutput(`> ${cmd}`);
        handleCommand(cmd);
        input.value = '';
        soundEnter.play();
      }
    });

    function printOutput(text, isAchievement = false) {
      const line = document.createElement('div');
      line.textContent = text;
      if (isAchievement) line.classList.add('achievement');
      terminal.insertBefore(line, input.parentElement);
      terminal.scrollTop = terminal.scrollHeight;
    }

    function updateHUD() {
      xpEl.textContent = xp;
      lvlEl.textContent = level;
      achEl.textContent = achievements.length;
      taskEl.textContent = tasks[currentTask] ? tasks[currentTask].desc : "–í—Å–µ –∑–∞–¥–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã!";
    }

    function handleCommand(cmd) {
      const lower = cmd.toLowerCase();
      switch (lower) {
        case 'help':
          printOutput('–ö–æ–º–∞–Ω–¥—ã: help, whoami, clear, hack nasa, coffee');
          break;
        case 'whoami':
          printOutput(`–í—ã: ${username}`);
          break;
        case 'hack nasa':
          printOutput('üö® ACCESS DENIED! NSA notified...');
          break;
        case 'coffee':
          printOutput('‚òï –ö–æ—Ñ–µ –≥–æ—Ç–æ–≤. –í–ø–µ—Ä—ë–¥ –∫ –∫–æ–¥—É!');
          break;
        case 'clear':
          [...terminal.querySelectorAll('div')].forEach((el, i) => {
            if (i > 0) el.remove();
          });
          return;
        default:
          printOutput('‚ùì –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞. help ‚Äî —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã.');
          soundError.play();
          break;
      }

      // –ó–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ?
      const task = tasks[currentTask];
      if (task && lower === task.command) {
        xp += task.reward;
        achievements.push(task.command);
        currentTask++;
        soundSuccess.play();

        if (xp >= level * 50) {
          level++;
          printOutput(`üéâ –ù–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å: ${level}`, true);
        }

        printOutput(`‚úÖ –ó–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ: ${task.command} (+${task.reward} XP)`, true);
        saveProgress();
        updateHUD();
      }
    }

    function saveProgress() {
      localStorage.setItem('xp', xp);
      localStorage.setItem('level', level);
      localStorage.setItem('achievements', JSON.stringify(achievements));
      localStorage.setItem('task', currentTask);
    }
  </script>
</body>
</html>
